<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
	
<h:head>
	<title>Company</title>
	<h:outputStylesheet searchfield="styles.css" />
</h:head>

<h:body>
	<p:growl id="messages" showDetail="true" sticky="false"/>
	<hr />
	<!-- Suchfunktion -->
	<h:form>
		<h:outputText value="Manage Companies" styleClass="header" />
		<br />
		<h:panelGrid columns="2">

			<p:inputText value="#{companyCatalogBean.searchfield}" placeholder="search">
				<f:ajax event="keyup" render="searchResults messages" execute="@this" listener="#{companyCatalogBean.searchCompaniesByTiping}" />
			</p:inputText>

		</h:panelGrid>

		<hr />
		<!--  Auflistung  -->
		<h:outputText value="Companies" styleClass="header" />
		<h:panelGroup id="searchResults">
			<p:dataTable value="#{companyCatalogBean.filteredCompanies}" var="company" rendered="#{not empty companyCatalogBean.filteredCompanies}">
				<p:column headerText="Name">
					<h:outputText value="#{company.name}" />
				</p:column>
				<p:column headerText="Origin">
					<h:outputText value="#{company.origin}" />
				</p:column>
				<p:column headerText="Founded">
					<h:outputText value="#{company.founded}" />
				</p:column>
			</p:dataTable>
		</h:panelGroup>

		<hr/>
		<!-- HinzufÃ¼gen -->
		<h:panelGrid id="newcompany" columns="2">
			<h:outputText value="Name: " />
			<p:inputText id="searchfield" value="#{companyCatalogBean.company.name}"/>
			<h:outputText value="Origin: " />
			<p:inputText id="origin" value="#{companyCatalogBean.company.origin}"/>
			<h:outputText value="Founded: " />
			<p:inputText id="founded" value="#{companyCatalogBean.company.founded}"/>
			<p:commandButton value="Add company" id="ajax" ajax="false" update="messages searchResults" process="founded searchfield origin" action="#{companyCatalogBean.addCompanyBySubmit}" styleClass="ui-priority-primary" />
		</h:panelGrid>

	</h:form>

</h:body>

</html>
