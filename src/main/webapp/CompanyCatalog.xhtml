<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
	
	
<h:head>
	<title>Company</title>
	<h:outputStylesheet name="styles.css" />
</h:head>

<h:body>
	<hr />
	<!-- Suchfunktion -->
	<h:form>
		<h:outputText value="Search for filteredCompanies with AJAX" styleClass="header" />
		<br />
		<h:panelGrid columns="2">
			<h:outputText value="Name: " />
			<h:inputText value="#{companyCatalogBean.name}">
				<f:ajax event="keyup" render="searchResults messages" execute="@this" listener="#{companyCatalogBean.searchCompaniesByTiping}" />
			</h:inputText>
			<h:outputText value="Origin: " />
			<h:inputText value="#{companyCatalogBean.origin}">
				<f:ajax event="keyup" render="searchResults messages" execute="@this" listener="#{companyCatalogBean.searchCompaniesByTiping}" />
			</h:inputText>
		</h:panelGrid>

		<hr />
		<!--  Auflistung  -->
		<h:outputText value="Companies" styleClass="header" />
		<h:panelGroup id="searchResults">
			<h:dataTable value="#{companyCatalogBean.filteredCompanies}" var="company" rendered="#{not empty companyCatalogBean.filteredCompanies}">
				<h:column>
					<f:facet name="header">
						<h:outputText value="Name" />
					</f:facet>
					<h:outputText value="#{company.name}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Origin" />
					</f:facet>
					<h:outputText value="#{company.origin}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText value="Founded" />
					</f:facet>
					<h:outputText value="#{company.founded}" />
				</h:column>
			</h:dataTable>
		</h:panelGroup>

		<hr />
		<h:outputText id="messages" value="#{companyCatalogBean.message}" styleClass="Message" />
		<hr/>

		<h:panelGrid id="newcompany" columns="2">
			<h:outputText value="Name: " />
			<h:inputText id="name" value="#{companyCatalogBean.company.name}">
			</h:inputText>
			<h:outputText value="Origin: " />
			<h:inputText id="origin" value="#{companyCatalogBean.company.origin}">
			</h:inputText>
			<h:outputText value="Founded: " />
			<h:inputText id="founded" value="#{companyCatalogBean.company.founded}">
			</h:inputText>
			<h:commandButton value="Add Company">
				<f:ajax event="click" render="messages searchResults" execute="founded name origin" listener="#{companyCatalogBean.addCompanyBySubmit}" />
			</h:commandButton>
		</h:panelGrid>

	</h:form>

</h:body>

</html>
